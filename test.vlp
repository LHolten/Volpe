step = (x, n) => {
    x == 1 -> :> n
    new_x = {
        x % 2 == 0 -> :> x / 2
        :> 3 * x + 1
    }
    :> @(new_x, n + 1)
}

collatz = x => step(x, 0)

:> collatz(7)